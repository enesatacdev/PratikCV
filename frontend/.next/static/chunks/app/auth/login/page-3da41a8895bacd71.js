(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{2384:(e,t,a)=>{Promise.resolve().then(a.bind(a,9598))},2657:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2919:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},5169:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6052:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>n,h:()=>o});var r=a(5155),s=a(2115),l=a(5695);let i=(0,s.createContext)(void 0),o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},n=e=>{let{children:t}=e,[a,o]=(0,s.useState)(null),[n,c]=(0,s.useState)(!0),d=(0,l.useRouter)(),m="http://localhost:5000/api";(0,s.useEffect)(()=>{p()},[]);let u=e=>{localStorage.setItem("authToken",e),document.cookie="authToken=".concat(e,"; path=/; max-age=").concat(604800,"; SameSite=Lax")},h=()=>{localStorage.removeItem("authToken"),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Lax",document.cookie="authToken=; path=/; max-age=0; SameSite=Lax",document.cookie="authToken=; path=/; domain=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},p=async()=>{try{let e=localStorage.getItem("authToken");if(!e)return void c(!1);let t=await fetch("".concat(m,"/auth/me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let e=await t.json(),a=e.id||e.userId,r=e.name||e.fullName||e.email,[s="",l=""]=r.split(" ");o({id:a,email:e.email,name:r,firstName:s,lastName:l,role:e.role,avatar:e.profilePhoto,isPremium:e.isPremium,premiumCredits:e.premiumCredits||0,phones:e.phones||[],emails:e.emails||[],address:e.address||"",birthDate:e.birthDate||""})}else h(),o(null)}catch(e){h(),o(null)}finally{c(!1)}},x=async(e,t)=>{try{c(!0);let x=await fetch("".concat(m,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),y=await x.json();if(!x.ok)return{success:!1,error:y.message||y.error||"Giriş yapılamadı"};{var a,r,s,l,i,n,d,h,p;u(y.token||y.accessToken);let t=(null==(a=y.user)?void 0:a.name)||(null==(r=y.user)?void 0:r.fullName)||(null==(s=y.user)?void 0:s.email),[c="",m=""]=t.split(" "),x={id:(null==(l=y.user)?void 0:l.id)||y.userId,email:(null==(i=y.user)?void 0:i.email)||e,name:t,firstName:c,lastName:m,role:null==(n=y.user)?void 0:n.role,avatar:null==(d=y.user)?void 0:d.avatar,isPremium:null==(h=y.user)?void 0:h.isPremium,premiumCredits:(null==(p=y.user)?void 0:p.premiumCredits)||0};return o(x),{success:!0}}}catch(e){return{success:!1,error:"Bağlantı hatası. L\xfctfen daha sonra tekrar deneyin."}}finally{c(!1)}},y=async(e,t,a,r)=>{try{c(!0);let x=await fetch("".concat(m,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t,email:a,password:r})}),y=await x.json();if(!x.ok)return{success:!1,error:y.message||y.error||"Kayıt olunamadı"};{var s,l,i,n,d,h,p;u(y.token||y.accessToken);let r=(null==(s=y.user)?void 0:s.fullName)||"".concat(e," ").concat(t),c={id:(null==(l=y.user)?void 0:l.id)||y.userId,email:(null==(i=y.user)?void 0:i.email)||a,name:r,firstName:e,lastName:t,role:null==(n=y.user)?void 0:n.role,avatar:null==(d=y.user)?void 0:d.avatar,isPremium:null==(h=y.user)?void 0:h.isPremium,premiumCredits:(null==(p=y.user)?void 0:p.premiumCredits)||0};return o(c),{success:!0}}}catch(e){return{success:!1,error:"Bağlantı hatası. L\xfctfen daha sonra tekrar deneyin."}}finally{c(!1)}},f=async()=>{await p()},v=async e=>{try{let t=localStorage.getItem("authToken");if(!t)return{success:!1,error:"Yetkilendirme hatası"};let r=await fetch("".concat(m,"/auth/profile-from-cv"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({fullName:e.fullName,phones:e.phones,emails:e.emails,address:e.address,profilePhoto:e.profilePhoto,birthDate:e.birthDate?new Date(e.birthDate).toISOString():null})});if(!r.ok){let e=await r.json();throw Error(e.message||"HTTP error! status: ".concat(r.status))}let s=await r.json();if(a){let t=s.fullName||e.fullName,[r="",l=""]=t.split(" ");o({...a,name:t,firstName:r,lastName:l,email:s.email||a.email,avatar:s.profilePhoto||e.profilePhoto||a.avatar,phones:s.phones||e.phones,emails:s.emails||e.emails,address:s.address||e.address,birthDate:s.birthDate||e.birthDate})}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Profil g\xfcncellenirken hata oluştu"}}},g=async()=>{try{if(!a||!a.premiumCredits||a.premiumCredits<1)return{success:!1,error:"Yeterli kredi yok"};let e=localStorage.getItem("authToken");if(!e)return{success:!1,error:"Yetkilendirme hatası"};let t=await fetch("".concat(m,"/auth/deduct-premium-credit"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.json();throw Error(e.message||"HTTP error! status: ".concat(t.status))}let r=await t.json();return o({...a,premiumCredits:r.remainingCredits||a.premiumCredits-1}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Kredi d\xfcş\xfcrme hatası"}}};return(0,r.jsx)(i.Provider,{value:{user:a,isLoading:n,isAuthenticated:!!a,login:x,register:y,logout:()=>{h(),o(null),d.push("/")},refreshUser:f,updateUserAvatar:e=>{a&&o({...a,avatar:e})},updateUserProfile:v,deductPremiumCredit:g},children:t})}},8749:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},8883:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var r=a(5155),s=a(2115),l=a(6052),i=a(5695),o=a(6874),n=a.n(o),c=a(5169),d=a(8883),m=a(2919),u=a(8749),h=a(2657),p=a(3568);function x(){let{login:e,isLoading:t}=(0,l.h)(),a=(0,i.useRouter)(),o=(0,i.useSearchParams)().get("redirect")||"/dashboard",[x,y]=(0,s.useState)({email:"",password:""}),[f,v]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),w=e=>{let{name:t,value:a}=e.target;y(e=>({...e,[t]:a}))},j=async t=>{if(t.preventDefault(),!x.email||!x.password)return void p.Ay.error("L\xfctfen t\xfcm alanları doldurun");b(!0);try{let t=await e(x.email,x.password);t.success?(p.Ay.success("Başarıyla giriş yapıldı!"),a.push(o)):p.Ay.error(t.error||"Giriş yapılırken bir hata oluştu")}catch(e){p.Ay.error("Bir hata oluştu. L\xfctfen tekrar deneyin.")}finally{b(!1)}};return t?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-yellow-500"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)("div",{className:"mb-6 flex justify-center",children:(0,r.jsxs)(n(),{href:"/",className:"inline-flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Ana Sayfaya D\xf6n"]})}),(0,r.jsx)("h2",{className:"text-center text-3xl font-bold tracking-tight text-gray-900",children:"Hesabınıza giriş yapın"}),(0,r.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Hesabınız yok mu?"," ",(0,r.jsx)(n(),{href:"/auth/register",className:"font-medium text-yellow-600 hover:text-yellow-500",children:"Hemen kayıt olun"})]})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"bg-white py-8 px-4 shadow-xl rounded-lg sm:px-10",children:[(0,r.jsxs)("form",{className:"space-y-6",onSubmit:j,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-posta adresi"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:x.email,onChange:w,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm",placeholder:"E-posta adresinizi girin"}),(0,r.jsx)(d.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Şifre"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:"current-password",required:!0,value:x.password,onChange:w,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm",placeholder:"Şifrenizi girin"}),(0,r.jsx)(m.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,r.jsx)("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>v(!f),children:f?(0,r.jsx)(u.A,{}):(0,r.jsx)(h.A,{})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Beni hatırla"})]}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)(n(),{href:"/auth/forgot-password",className:"font-medium text-yellow-600 hover:text-yellow-500",children:"Şifremi unuttum"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:g?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Giriş yapılıyor..."]}):"Giriş Yap"})})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Veya"})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Demo hesabı ile giriş yapmak i\xe7in:"," ",(0,r.jsx)("button",{onClick:()=>{y({email:"demo@pratikcv.com",password:"demo123"})},className:"font-medium text-yellow-600 hover:text-yellow-500",children:"Demo bilgileri kullan"})]})})]})]})})]})}function y(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{children:"Y\xfckleniyor..."}),children:(0,r.jsx)(x,{})})}}},e=>{e.O(0,[95,8006,8441,5964,7358],()=>e(e.s=2384)),_N_E=e.O()}]);