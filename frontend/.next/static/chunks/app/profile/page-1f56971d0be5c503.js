(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{4416:(e,l,a)=>{"use strict";a.d(l,{A:()=>r});let r=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,l,a)=>{"use strict";a.d(l,{A:()=>r});let r=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8932:(e,l,a)=>{Promise.resolve().then(a.bind(a,9576))},9576:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>p});var r=a(5155),s=a(2115),t=a(6052),i=a(3568),o=a(4616);let n=(0,a(9946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var d=a(4416),c=a(9869),u=a(2729);function m(e){let{currentPhotoUrl:l,onPhotoChange:a,userId:o,updateAuthProfile:m=!1,authPhotoUrl:h}=e,[x,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),{updateUserAvatar:b}=(0,t.h)(),g=l||h||"/placeholder-avatar.png",v=async e=>{if(e){if(!e.type.startsWith("image/"))return void i.Ay.error("❌ L\xfctfen sadece resim dosyası se\xe7in.");if(e.size>5242880)return void i.Ay.error("❌ Dosya boyutu 5MB'dan k\xfc\xe7\xfck olmalıdır.");p(!0);try{let l=(await u.N.uploadProfilePhoto(e,o)).url;a(l),b(l),i.Ay.success("\uD83D\uDCF8 Profil fotoğrafı başarıyla y\xfcklendi ve navbar g\xfcncellendi!")}catch(e){i.Ay.error("❌ Dosya y\xfcklenirken bir hata oluştu.")}finally{p(!1)}}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Profil Fotoğrafı"}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-100 border-2 border-gray-200",children:g&&"/placeholder-avatar.png"!==g?(0,r.jsx)("img",{src:g,alt:"Profil fotoğrafı",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,r.jsx)(n,{className:"w-8 h-8"})})}),l&&(0,r.jsx)("button",{onClick:()=>{a(""),b(""),i.Ay.success("\uD83D\uDDD1️ Profil fotoğrafı kaldırıldı!")},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",title:"Fotoğrafı kaldır",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})})]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(f?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"," ").concat(x?"opacity-50 cursor-not-allowed":"cursor-pointer"),onDrop:e=>{e.preventDefault(),y(!1);let l=e.dataTransfer.files;l[0]&&v(l[0])},onDragOver:e=>{e.preventDefault(),y(!0)},onDragLeave:e=>{e.preventDefault(),y(!1)},onClick:()=>{if(!x){var e;null==(e=document.getElementById("photo-upload"))||e.click()}},children:[(0,r.jsx)("input",{id:"photo-upload",type:"file",accept:"image/*",onChange:e=>{var l;let a=null==(l=e.target.files)?void 0:l[0];a&&v(a)},className:"hidden",disabled:x}),(0,r.jsx)(c.A,{className:"mx-auto h-12 w-12 ".concat(x?"text-gray-300":"text-gray-400")}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"text-sm ".concat(x?"text-gray-400":"text-gray-600"),children:x?"Y\xfckleniyor...":"Fotoğraf y\xfcklemek i\xe7in tıklayın veya s\xfcr\xfckleyin"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF - Maksimum 5MB"})]})]})})]}),h&&!l&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"* Şu anda auth hesabınızdaki fotoğraf g\xf6steriliyor"})]})}function h(e){let{formData:l,updateFormData:a,addArrayItem:s,removeArrayItem:i,updateArrayItem:n}=e,{user:d}=(0,t.h)();return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(m,{currentPhotoUrl:l.profilePhoto,onPhotoChange:e=>a({...l,profilePhoto:e}),userId:(null==d?void 0:d.id)||"",authPhotoUrl:null==d?void 0:d.avatar}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad"}),(0,r.jsx)("input",{type:"text",value:l.firstName,onChange:e=>a({...l,firstName:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Adınız",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Soyad"}),(0,r.jsx)("input",{type:"text",value:l.lastName,onChange:e=>a({...l,lastName:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Soyadınız",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doğum Tarihi"}),(0,r.jsx)("input",{type:"date",value:l.birthDate,onChange:e=>a({...l,birthDate:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon Numaraları"}),(0,r.jsxs)("div",{className:"space-y-2",children:[l.phones.map((e,a)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"tel",value:e,onChange:e=>n("phones",a,e.target.value),className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Telefon numarası"}),l.phones.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>i("phones",a),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Sil"})]},a)),(0,r.jsxs)("button",{type:"button",onClick:()=>s("phones",""),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Telefon Ekle"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Adresleri"}),(0,r.jsxs)("div",{className:"space-y-2",children:[l.emails.map((e,a)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"email",value:e,onChange:e=>n("emails",a,e.target.value),className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Email adresi"}),l.emails.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>i("emails",a),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Sil"})]},a)),(0,r.jsxs)("button",{type:"button",onClick:()=>s("emails",""),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Email Ekle"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres"}),(0,r.jsx)("textarea",{value:l.address,onChange:e=>a({...l,address:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent",rows:3,placeholder:"Tam adresiniz"})]})]})}function x(){let{user:e,updateUserProfile:l}=(0,t.h)(),[a,o]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)({firstName:"",lastName:"",phones:[""],emails:[""],profilePhoto:"",address:"",birthDate:""});if((0,s.useEffect)(()=>{if(null==e?void 0:e.id){d(!0);try{let[l="",a=""]=((null==e?void 0:e.name)||"").split(" ");u({firstName:l,lastName:a,phones:(null==e?void 0:e.phones)&&e.phones.length>0?e.phones:[""],emails:(null==e?void 0:e.emails)&&e.emails.length>0?e.emails:[(null==e?void 0:e.email)||""].filter(Boolean),profilePhoto:(null==e?void 0:e.avatar)||"",address:(null==e?void 0:e.address)||"",birthDate:(null==e?void 0:e.birthDate)?e.birthDate.split("T")[0]:""})}finally{d(!1)}}},[null==e?void 0:e.id,null==e?void 0:e.name,null==e?void 0:e.email,null==e?void 0:e.avatar,null==e?void 0:e.phones,null==e?void 0:e.emails,null==e?void 0:e.address,null==e?void 0:e.birthDate]),!e)return null;let m=async a=>{if(a.preventDefault(),null==e?void 0:e.id){o(!0);try{let e=(c.phones||[]).filter(e=>e&&""!==e.trim()),a=(c.emails||[]).filter(e=>e&&""!==e.trim()),r=await l({fullName:"".concat(c.firstName," ").concat(c.lastName).trim(),phones:e,emails:a,address:c.address,profilePhoto:c.profilePhoto,birthDate:c.birthDate});r.success?i.Ay.success("✅ Profil bilgileriniz başarıyla kaydedildi!",{duration:3e3,icon:"\uD83C\uDF89"}):i.Ay.error("❌ Profil kaydedilirken bir hata oluştu: ".concat(r.error||""),{duration:5e3})}catch(e){i.Ay.error("❌ Profil kaydedilirken bir hata oluştu.",{duration:5e3})}finally{o(!1)}}};return(0,r.jsx)("div",{className:"profile-area",children:(0,r.jsx)("div",{className:"global-container",children:(0,r.jsx)("div",{className:"mx-auto",children:n?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Profil verileriniz y\xfckleniyor..."})]})}):(0,r.jsx)("div",{className:"mx-auto",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,r.jsx)("form",{onSubmit:m,children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Kişisel Bilgiler"}),(0,r.jsx)("div",{className:"text-gray-600",children:(0,r.jsx)(h,{formData:c,updateFormData:e=>{u(l=>({...l,...e}))},addArrayItem:(e,l)=>{"phones"===e?u(e=>({...e,phones:[...e.phones,l]})):"emails"===e&&u(e=>({...e,emails:[...e.emails,l]}))},removeArrayItem:(e,l)=>{"phones"===e?u(e=>({...e,phones:e.phones.filter((e,a)=>a!==l)})):"emails"===e&&u(e=>({...e,emails:e.emails.filter((e,a)=>a!==l)}))},updateArrayItem:(e,l,a)=>{"phones"===e?u(e=>({...e,phones:e.phones.map((e,r)=>r===l?a:e)})):"emails"===e&&u(e=>({...e,emails:e.emails.map((e,r)=>r===l?a:e)}))}})}),(0,r.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,r.jsx)("button",{type:"submit",disabled:a,className:"px-8 py-3 bg-gradient-to-r from-yellow-500 to-amber-600 text-white rounded-lg font-semibold hover:from-yellow-600 hover:to-amber-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:a?"Kaydediliyor...":"Değişiklikleri Kaydet"})})]})})})})})})})}function p(){let{user:e,isLoading:l}=(0,t.h)();return l||!e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-yellow-500"})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-30",children:(0,r.jsx)("div",{className:"global-container",children:(0,r.jsx)(x,{})})})}}},e=>{e.O(0,[8006,3534,8441,5964,7358],()=>e(e.s=8932)),_N_E=e.O()}]);